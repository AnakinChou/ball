@echo off
REM Call with $(InputName) $(InputDir) $(InputPath)
REM We need this file since bison confuses the correct case of the filename
REM it is supposed to generate

REM We need to remove the last "Parser" from names like expressionParserParser
SET PARSERNAME=%1
SET PARSERNAME=%PARSERNAME:~0,-6%

REM Now, we need to make sure the first letter is capitalized...
REM there is probably a non-stupid way to do this, but I know of none
SET FIRSTLETTER=%PARSERNAME:~0,1%
SET FIRSTLETTER=%FIRSTLETTER:a=A%
SET FIRSTLETTER=%FIRSTLETTER:b=B%
SET FIRSTLETTER=%FIRSTLETTER:c=C%
SET FIRSTLETTER=%FIRSTLETTER:d=D%
SET FIRSTLETTER=%FIRSTLETTER:e=E%
SET FIRSTLETTER=%FIRSTLETTER:f=F%
SET FIRSTLETTER=%FIRSTLETTER:g=G%
SET FIRSTLETTER=%FIRSTLETTER:h=H%
SET FIRSTLETTER=%FIRSTLETTER:i=I%
SET FIRSTLETTER=%FIRSTLETTER:j=J%
SET FIRSTLETTER=%FIRSTLETTER:k=K%
SET FIRSTLETTER=%FIRSTLETTER:l=L%
SET FIRSTLETTER=%FIRSTLETTER:m=M%
SET FIRSTLETTER=%FIRSTLETTER:n=N%
SET FIRSTLETTER=%FIRSTLETTER:o=O%
SET FIRSTLETTER=%FIRSTLETTER:p=P%
SET FIRSTLETTER=%FIRSTLETTER:q=Q%
SET FIRSTLETTER=%FIRSTLETTER:r=R%
SET FIRSTLETTER=%FIRSTLETTER:s=S%
SET FIRSTLETTER=%FIRSTLETTER:t=T%
SET FIRSTLETTER=%FIRSTLETTER:u=U%
SET FIRSTLETTER=%FIRSTLETTER:v=V%
SET FIRSTLETTER=%FIRSTLETTER:w=W%
SET FIRSTLETTER=%FIRSTLETTER:x=X%
SET FIRSTLETTER=%FIRSTLETTER:y=Y%
SET FIRSTLETTER=%FIRSTLETTER:z=Z%

SET PARSERNAME=%FIRSTLETTER%%PARSERNAME:~1%

bison.exe -b %1 -d -p %PARSERNAME% %3 -o bison.out.C
MOVE bison.out.c %2\%1.C
MOVE bison.out.h %2\%1.h
