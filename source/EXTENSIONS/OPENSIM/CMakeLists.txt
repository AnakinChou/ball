PROJECT(OPENSIM)

SET(DIRECTORY source)
### list all filenames of the directory here ###
SET(UI_SOURCES_LIST
	${DIRECTORY}/OpenSimPluginConfiguration.ui
)

SET(SOURCES_LIST
	${DIRECTORY}/OpenSimPlugin.C
	${DIRECTORY}/OpenSimCommandExecutionThread.C
	${DIRECTORY}/OpenSimPluginConfiguration.C
	${DIRECTORY}/OpenSimReceiver.C
	${DIRECTORY}/OpenSimTask.C
	${DIRECTORY}/OpenSimWorkerThread.C
	${DIRECTORY}/MolecularDynamicsContainer.C
	${DIRECTORY}/MolecularModelingContainer.C
	${DIRECTORY}/MolecularStructureContainer.C
)

SET(RCC_SOURCES_LIST
	${DIRECTORY}/logo.qrc
)

SET(DIRECTORY include)
### the list of all files requiring a moc run ###
SET(MOC_SOURCES_LIST
	${DIRECTORY}/OpenSimPlugin.h
	${DIRECTORY}/OpenSimCommandExecutionThread.h
	${DIRECTORY}/OpenSimPluginConfiguration.h
	${DIRECTORY}/OpenSimReceiver.h
	${DIRECTORY}/OpenSimWorkerThread.h
	${DIRECTORY}/MolecularDynamicsContainer.h
	${DIRECTORY}/MolecularModelingContainer.h
	${DIRECTORY}/MolecularStructureContainer.h
)
#IF (${CMAKE_SYSTEM_NAME} MATCHES "Darwin")
#	LIST(APPEND RESOURCES_LIST ${CMAKE_SOURCE_DIR}/cmake/installer/BALLView.icns)
#	SET(MACOSX_BUNDLE_ICON_FILE BALLView.icns)
#	SET_SOURCE_FILES_PROPERTIES(${CMAKE_SOURCE_DIR}/cmake/installer/BALLView.icns
#			PROPERTIES MACOSX_PACKAGE_LOCATION Resources)
#ENDIF()


QT4_WRAP_CPP(MOC_OUTFILES ${MOC_SOURCES_LIST})
QT4_ADD_RESOURCES(RCC_OUTFILES ${RCC_SOURCES_LIST})
QT4_WRAP_UI(UIC_OUTFILES ${UI_SOURCES_LIST})

INCLUDE_DIRECTORIES(${PROJECT_SOURCE_DIR}/include)
INCLUDE_DIRECTORIES(${PROJECT_BINARY_DIR})

ADD_DEFINITIONS(${QT_DEFINITIONS})
ADD_DEFINITIONS(-DQT_PLUGIN)
ADD_DEFINITIONS(-DQT_NO_DEBUG)
ADD_DEFINITIONS(-DQT_SHARED)

ADD_LIBRARY(pluginOpenSim SHARED
	${SOURCES_LIST}
	${MOC_OUTFILES}
	${RCC_OUTFILES}
	${UIC_OUTFILES}
)

SET_TARGET_PROPERTIES(pluginOpenSim PROPERTIES PREFIX "")

INSTALL(TARGETS pluginOpenSim
	COMPONENT "${COMPONENT_PLUGINS}"
	RUNTIME DESTINATION "${BALL_PLUGIN_INSTALL_DIRECTORY}"
	LIBRARY DESTINATION "${BALL_PLUGIN_INSTALL_DIRECTORY}"
)

TARGET_LINK_LIBRARIES(pluginOpenSim BALL VIEW)
